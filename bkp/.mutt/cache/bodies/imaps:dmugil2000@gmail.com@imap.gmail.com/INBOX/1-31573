Delivered-To: dmugil2000@gmail.com
Received: by 2002:a17:906:3b82:0:0:0:0 with SMTP id u2csp2707522ejf;
        Sun, 14 Mar 2021 00:41:35 -0800 (PST)
X-Received: by 2002:a05:6214:f65:: with SMTP id iy5mr5681425qvb.32.1615711295596;
        Sun, 14 Mar 2021 00:41:35 -0800 (PST)
ARC-Seal: i=1; a=rsa-sha256; t=1615711295; cv=none;
        d=google.com; s=arc-20160816;
        b=eO51DrFX+7ZrGzwwmc2VvjkBB8Vt34l//XUTCUszS88bwj58esTc1kHP4onBfoRUPK
         BBn/UPNIfBqGuCyJeEWUaX/0wY9cjpXgGYTO4Hg7DXFY5kw3JgDs7Vhv678bqx5xOm8S
         7tos363qJJLxSoVL1sgvBTbakFOA+c3eKfOgXGqA+jOO8gaaPXE5qc68YLT41OfOZwHc
         bFGDfqQXLNo/9OCf9JAnmP5O/+dWf7IY3kfIyNfDzHkWeLVPTrwAvV7nI5gERs4eBSn9
         0tPZwWMvBLMXkmOgAaReKkxnZhvebJA8rrzSYWBZl0GulMJo3IgBDEvcC5anSvfl2UV9
         hliQ==
ARC-Message-Signature: i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816;
        h=to:subject:message-id:date:from:in-reply-to:references:mime-version
         :dkim-signature;
        bh=pfpBEz7Gk+j+PeyToC6Kz+5yNxBdZ7hqH8kiuuEayI4=;
        b=Dll5I72mx+6a/7tZ6Yea//aACHJM2Z/Iu397KeGDqlR8gTbZukBIAzBiccn+oWhqIL
         FOn6zYrrPHF/W3Sb7lduaFmb4VKwiORMVJTbFBQsC722QqBtUPP7nf3m4GVZzQ/N0ZVO
         hAOVJY3qz2h1axsH65LISoJQScmsYsJ0jlqUx1sGR13T0HxzTUel/4H/gQrvk9WriZNP
         LcibJ2iVdejUoIHdxq8TFbvx7DZzASzAg3Ma+Qph5lbrWuQq0ZjImiLFDVo82br/gKgs
         wJ54o3FGe3kuzD4HA4CpEp5uzc8cbl8yREYg4fjcRU7ZfKMey7KlROig2p+KtyTQoovU
         dOZw==
ARC-Authentication-Results: i=1; mx.google.com;
       dkim=pass header.i=@gmail.com header.s=20161025 header.b=QBODH5qa;
       spf=pass (google.com: domain of dmugilbp2000@gmail.com designates 209.85.220.41 as permitted sender) smtp.mailfrom=dmugilbp2000@gmail.com;
       dmarc=pass (p=NONE sp=QUARANTINE dis=NONE) header.from=gmail.com
Return-Path: <dmugilbp2000@gmail.com>
Received: from mail-sor-f41.google.com (mail-sor-f41.google.com. [209.85.220.41])
        by mx.google.com with SMTPS id h7sor5500666qvj.16.2021.03.14.00.41.35
        for <dmugil2000@gmail.com>
        (Google Transport Security);
        Sun, 14 Mar 2021 00:41:35 -0800 (PST)
Received-SPF: pass (google.com: domain of dmugilbp2000@gmail.com designates 209.85.220.41 as permitted sender) client-ip=209.85.220.41;
Authentication-Results: mx.google.com;
       dkim=pass header.i=@gmail.com header.s=20161025 header.b=QBODH5qa;
       spf=pass (google.com: domain of dmugilbp2000@gmail.com designates 209.85.220.41 as permitted sender) smtp.mailfrom=dmugilbp2000@gmail.com;
       dmarc=pass (p=NONE sp=QUARANTINE dis=NONE) header.from=gmail.com
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20161025;
        h=mime-version:references:in-reply-to:from:date:message-id:subject:to;
        bh=pfpBEz7Gk+j+PeyToC6Kz+5yNxBdZ7hqH8kiuuEayI4=;
        b=QBODH5qazTWFIpr4/ktjuwXZUWwwONTUP70iFtSNqa/NFMmkUHtB9aZ0aqDwtA1oIu
         GatYmAD+wMTto275Y4PnTflDrRGou42o/80uNwRxRTVgVBsBPMieJCr5o/Ck8ruCA6aS
         DMkD5CrBaKh9D/LApj2nbpQYDclO0oXSfyi8MMR1gqgUocKcyTNF6MRH/1aahHu33T9N
         7O8PXg8IvVf43HZPWeobWqkwbQrAxCV1dsU5tmzMNpf6oGz0L4IXukFBrsOaGT+4iS4/
         QR76Sg265UlhI79EnkQ1kMNA6XHuOLEknRu1l45gkoCi+xYiGQlJm6Pkjn1GxB852lqs
         Ht9Q==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=1e100.net; s=20161025;
        h=x-gm-message-state:mime-version:references:in-reply-to:from:date
         :message-id:subject:to;
        bh=pfpBEz7Gk+j+PeyToC6Kz+5yNxBdZ7hqH8kiuuEayI4=;
        b=FNP7kWNeLlcwSgXyglPPTCTMJuSq/JqiWbywLJ7z3cREtKsCEK0fZKgtKFr6dVyQWy
         gG/xlVG5AqWAtx378c/L830afL5BUzkU/DKrD1exZtj20nDz1Nm6PWS6MoYohwpP8PQ9
         23rsvUkTmDtbM7Fg/LwGtyktDKGNEL0/mANTeC0IsYrvLDbGRgSaxcjgQJpHeBgr4XFf
         L4qQz/AMfzN703Y1OgU6NtVSmNa90nymTdoLRe+iymVSTMtT7XQHcDONGmK0OOf8118K
         cGMHSx7ll/2PBr0MX/FRl0fWcxMnVqcg3J/C6IKvjeIIhYGprFmJpr/ezc5kM6YFSWdw
         s2Yw==
X-Gm-Message-State: AOAM530BIon2x73u2yIdxpR9g6nqlTULsR9o2Zr9ajdg+OlYubVy8pXH
	nMIbWcZwWg4D/rpFLixfC9jJeRdog9dCRaVTsMWofBaK
X-Google-Smtp-Source: ABdhPJzXnYI/cVml9hmA+pmgX9LzRgq611n8huJIbiNFIocXuYOHBmYq4kGWFkbLtkXOCdV0sk5UFAFEdjXaZNGACBM=
X-Received: by 2002:a0c:e1c7:: with SMTP id v7mr5705840qvl.30.1615711295145;
 Sun, 14 Mar 2021 00:41:35 -0800 (PST)
MIME-Version: 1.0
References: <20210314083943.GA8070@mugil-Nitro-AN515-52>
In-Reply-To: <20210314083943.GA8070@mugil-Nitro-AN515-52>
From: Mugil Raj <dmugilbp2000@gmail.com>
Date: Sun, 14 Mar 2021 14:11:23 +0530
Message-ID: <CAMr4FP6hCm8_rRsbO+qU=tRBED0rkysUN-MRKn4Ji2Ei0bRwHA@mail.gmail.com>
Subject: Re: [PATCH] iio:dac:max517: Use devm_iio_device_register()
To: Mugilraj Dhavachelvan <dmugil2000@gmail.com>
Content-Type: multipart/alternative; boundary="000000000000ce899405bd7b19e7"

--000000000000ce899405bd7b19e7
Content-Type: text/plain; charset="UTF-8"

Applied thanks

On Sun, Mar 14, 2021, 2:09 PM Mugilraj Dhavachelvan <dmugil2000@gmail.com>
wrote:

> Use devm_iio_device_register() to avoid remove function and drop explicit
> call to iio_device_unregister().
>
> Signed-off-by: Mugilraj Dhavachelvan <dmugil2000@gmail.com>
> ---
>  drivers/iio/dac/max517.c | 9 +--------
>  1 file changed, 1 insertion(+), 8 deletions(-)
>
> diff --git a/drivers/iio/dac/max517.c b/drivers/iio/dac/max517.c
> index 7e01838ef4d0..5f72f126162d 100644
> --- a/drivers/iio/dac/max517.c
> +++ b/drivers/iio/dac/max517.c
> @@ -189,13 +189,7 @@ static int max517_probe(struct i2c_client *client,
>                         data->vref_mv[chan] = platform_data->vref_mv[chan];
>         }
>
> -       return iio_device_register(indio_dev);
> -}
> -
> -static int max517_remove(struct i2c_client *client)
> -{
> -       iio_device_unregister(i2c_get_clientdata(client));
> -       return 0;
> +       return devm_iio_device_register(&client->dev, indio_dev);
>  }
>
>  static const struct i2c_device_id max517_id[] = {
> @@ -214,7 +208,6 @@ static struct i2c_driver max517_driver = {
>                 .pm     = &max517_pm_ops,
>         },
>         .probe          = max517_probe,
> -       .remove         = max517_remove,
>         .id_table       = max517_id,
>  };
>  module_i2c_driver(max517_driver);
> --
> 2.25.1
>
>

--000000000000ce899405bd7b19e7
Content-Type: text/html; charset="UTF-8"
Content-Transfer-Encoding: quoted-printable

<div dir=3D"auto">Applied thanks=C2=A0</div><br><div class=3D"gmail_quote">=
<div dir=3D"ltr" class=3D"gmail_attr">On Sun, Mar 14, 2021, 2:09 PM Mugilra=
j Dhavachelvan &lt;<a href=3D"mailto:dmugil2000@gmail.com">dmugil2000@gmail=
.com</a>&gt; wrote:<br></div><blockquote class=3D"gmail_quote" style=3D"mar=
gin:0 0 0 .8ex;border-left:1px #ccc solid;padding-left:1ex">Use devm_iio_de=
vice_register() to avoid remove function and drop explicit call to iio_devi=
ce_unregister().<br>
<br>
Signed-off-by: Mugilraj Dhavachelvan &lt;<a href=3D"mailto:dmugil2000@gmail=
.com" target=3D"_blank" rel=3D"noreferrer">dmugil2000@gmail.com</a>&gt;<br>
---<br>
=C2=A0drivers/iio/dac/max517.c | 9 +--------<br>
=C2=A01 file changed, 1 insertion(+), 8 deletions(-)<br>
<br>
diff --git a/drivers/iio/dac/max517.c b/drivers/iio/dac/max517.c<br>
index 7e01838ef4d0..5f72f126162d 100644<br>
--- a/drivers/iio/dac/max517.c<br>
+++ b/drivers/iio/dac/max517.c<br>
@@ -189,13 +189,7 @@ static int max517_probe(struct i2c_client *client,<br>
=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=
=A0 =C2=A0 data-&gt;vref_mv[chan] =3D platform_data-&gt;vref_mv[chan];<br>
=C2=A0 =C2=A0 =C2=A0 =C2=A0 }<br>
<br>
-=C2=A0 =C2=A0 =C2=A0 =C2=A0return iio_device_register(indio_dev);<br>
-}<br>
-<br>
-static int max517_remove(struct i2c_client *client)<br>
-{<br>
-=C2=A0 =C2=A0 =C2=A0 =C2=A0iio_device_unregister(i2c_get_clientdata(client=
));<br>
-=C2=A0 =C2=A0 =C2=A0 =C2=A0return 0;<br>
+=C2=A0 =C2=A0 =C2=A0 =C2=A0return devm_iio_device_register(&amp;client-&gt=
;dev, indio_dev);<br>
=C2=A0}<br>
<br>
=C2=A0static const struct i2c_device_id max517_id[] =3D {<br>
@@ -214,7 +208,6 @@ static struct i2c_driver max517_driver =3D {<br>
=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 .pm=C2=A0 =C2=A0 =
=C2=A0=3D &amp;max517_pm_ops,<br>
=C2=A0 =C2=A0 =C2=A0 =C2=A0 },<br>
=C2=A0 =C2=A0 =C2=A0 =C2=A0 .probe=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =3D ma=
x517_probe,<br>
-=C2=A0 =C2=A0 =C2=A0 =C2=A0.remove=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0=3D ma=
x517_remove,<br>
=C2=A0 =C2=A0 =C2=A0 =C2=A0 .id_table=C2=A0 =C2=A0 =C2=A0 =C2=A0=3D max517_=
id,<br>
=C2=A0};<br>
=C2=A0module_i2c_driver(max517_driver);<br>
-- <br>
2.25.1<br>
<br>
</blockquote></div>

--000000000000ce899405bd7b19e7--
